{% extends "base.html" %}
{% from '_macros.html' import render_paper %}

{% block title %}Search Results - arXiv Combinatorics{% endblock %}

{% block content %}
{% if query %}
    <div class="stats">
        Found {{ total }} paper(s) matching "{{ query }}"
    </div>

    {% if papers %}
        {% for paper in papers %}
            {{ render_paper(paper, latest_date) }}
        {% endfor %}

        {% if total_pages > 1 %}
        <div class="pagination">
            {% if page > 1 %}
                <a href="/search?q={{ query }}&page={{ page - 1 }}">« Previous</a>
            {% endif %}

            {% for p in range(1, total_pages + 1) %}
                {% if p == page %}
                    <span class="current">{{ p }}</span>
                {% elif p == 1 or p == total_pages or (p >= page - 2 and p <= page + 2) %}
                    <a href="/search?q={{ query }}&page={{ p }}">{{ p }}</a>
                {% elif p == page - 3 or p == page + 3 %}
                    <span>...</span>
                {% endif %}
            {% endfor %}

            {% if page < total_pages %}
                <a href="/search?q={{ query }}&page={{ page + 1 }}">Next »</a>
            {% endif %}
        </div>
        {% endif %}
    {% else %}
        <p>No papers found matching your search.</p>
    {% endif %}
{% else %}
    <p>Enter a search term to find papers.</p>
{% endif %}
{% endblock %}
